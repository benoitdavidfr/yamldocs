# Description de ROUTE 500
title: ROUTE 500 2018
abstract: |
  La base de données ROUTE 500® contient l'intégralité du réseau routier classé caractérisé par un certain nombre de propriétés et complété par les éléments du réseau routier secondaire permettant la desserte des chefs-lieux de communes et des principales infrastructures de transport.
  
  La carte correspondante peut être [générée ici](id.php/geodata/route500/map/display).
  
  **URL de test** :
    
  - [ogrPath simple: aerodrome](id.php/geodata/route500/aerodrome?bbox=-2.7,47.2,2.8,49.7&zoom=8)
  - [ogrPath simple: commune](id.php/geodata/route500/commune?bbox=-2.7,47.2,2.8,49.7&zoom=8)
  - [onZoomGeo: troncon_voie_ferree
  ](id.php/geodata/route500/troncon_voie_ferree?bbox=-2.7,47.2,2.8,49.7&zoom=8)
  - [onZoomGeo: noeud_commune](id.php/geodata/route500/noeud_commune?bbox=-2.7,47.2,2.8,49.7&zoom=8)
  - [select: coastline](id.php/geodata/route500/coastline?bbox=-1.97,46.68,-1.92,46.70&zoom=8)
  - [troncon_hydrographique
  ](id.php/geodata/route500/troncon_hydrographique?bbox=-1.97,46.68,-1.92,46.70&zoom=8)
  - [noeud_commune / nom_comm like 'BEAUN%'
  ](id.php/geodata/route500/noeud_commune?where=nom_comm%20like%20'BEAUN%')
  
licence:
  uri: https://www.etalab.gouv.fr/licence-ouverte-open-licence
  title: licence ouverte Etalab.
doc_url: http://professionels.ign.fr/route500
metadata: http://professionels.ign.fr/sites/default/files/IGNF_ROUTE500r_2-1.xml
yamlClass: VectorDataset
# chemins d'accès principal pour le chargement à partir du répertoire des données
dbpath:  route500/ROUTE500_2-1__SHP_LAMB93_FXX_2018-04-09/ROUTE500/1_DONNEES_LIVRAISON_2018-04-00189/R500_2-1_SHP_LAMB93_FXX-ED181
# Je considère que la résolution de Route 500 est de 40 m
# (360° = 40 000 km => 40 m = 360 / 40 000 000 * 40 = 0,00036 °)
# J'arrondis donc les coordonnées à 4 décimales
precision: 4
minZoom: 8
maxZoom: 18

layers:
  limite_administrative:
    title: Limite administrative
    onZoomGeo:
      0: /geodata/ne_110m/admin_0_boundary_lines_land
      5: /geodata/ne_10m/admin_0_boundary_lines_land
      7: nature in ('Limite côtière','Frontière internationale')
      8: nature in ('Limite côtière','Frontière internationale','Limite de région')
      9: nature in ('Limite côtière','Frontière internationale','Limite de région','Limite de département')
      11: all
    style: |
      function(feature) {
          switch (feature.properties.nature) {
              case 'Limite côtière': return {color: 'blue', weight: 1};
              case 'Frontière internationale': return {color: 'maroon', weight: 2};
              case 'Limite de région': return {color: 'red', weight: 1};
              case 'Limite de département': return {color: 'orange', weight: 1};
              case 'Limite d\'arrondissement':   return {color: 'lightGrey', weight: 1};
              case 'Limite de commune':   return {color: 'lightGrey', weight: 1};
          }
      }
    ogrPath: ADMINISTRATIF/LIMITE_ADMINISTRATIVE.shp
    indexes:
      id_rte500: true
  coastline:
    title: Limite côtière
    select: limite_administrative / nature='Limite côtière'
    style: { color: blue, weight: 2, opacity: 0.65 }
  land_boundary_line:
    title: Frontière internationale
    select: limite_administrative / nature='Frontière internationale'
    style: { color: maroon, weight: 2, opacity: 0.65 }
  commune:
    title: commune
    style: { color: grey, weight: 1, opacity: 0.65 }
    ogrPath: ADMINISTRATIF/COMMUNE.shp
    indexes:
      id_rte500: true
  noeud_commune:
    title: noeud_commune
    onZoomGeo:
      6: statut in ('Préfecture de région','Préfecture')
      10: statut in ('Préfecture de région','Préfecture','Sous-préfecture')
      12: population >= 1.0
      14: all
    ogrPath: RESEAU_ROUTIER/NOEUD_COMMUNE.shp
    indexes:
      id_rte500: true
      nom_comm: false
      insee_comm: false
      statut: false
  noeud_routier:
    title: noeud_routier
    ogrPath: RESEAU_ROUTIER/NOEUD_ROUTIER.shp
  troncon_route:
    title: troncon de route
    onZoomGeo:
      6: vocation in ('Type autoroutier')
      9: vocation in ('Type autoroutier','Liaison principale')
      11: vocation in ('Type autoroutier','Liaison principale','Liaison régionale')
      14: all
    style: |
      function(feature) {
          switch (feature.properties.vocation) {
              case 'Type autoroutier': return { color: 'violet', weight: 2};
              case 'Liaison principale': return { color: 'red', weight: 1};
              case 'Liaison régionale': return { color: 'orange', weight: 1};
              case 'Liaison locale': return { color: 'yellow', weight: 1};
          }
      }
    ogrPath: RESEAU_ROUTIER/TRONCON_ROUTE.shp
  aerodrome:
    title: aerodrome
    ogrPath: RESEAU_ROUTIER/AERODROME.shp
  communication_restreinte:
    title: Communication restreinte
    ogrPath: RESEAU_ROUTIER/COMMUNICATION_RESTREINTE.shp
  noeud_ferre:
    title: Noeud ferré
    ogrPath: RESEAU_FERRE/NOEUD_FERRE.shp
  troncon_voie_ferree:
    title: Voie ferrée
    onZoomGeo:
      6: nature='LGV'
      8: nature='LGV' or energie='Electrifiée'
      10: all
    style: |
      function(feature) {
        if (feature.properties.nature=='LGV')
          return { color: 'black', weight: 2, opacity: 0.65 };
        else if (feature.properties.energie=='Electrifiée')
          return { color: 'black', weight: 1, opacity: 0.65 };
        else
          return { color: 'black', weight: 1, 
          stroke_dasharray:'8,2', 
          'line-dasharray': [2, 1],
          'dasharrayx': [2, 5],
          'dasharray': '4, 5',
          opacity: 0.65 };
      }
    ogrPath: RESEAU_FERRE/TRONCON_VOIE_FERREE.shp
  cote_frontiere:
    title: cote_frontiere
    ogrPath: HABILLAGE/COTE_FRONTIERE.shp
  troncon_hydrographique:
    title: Tronçon hydrographique et cours d’eau
    ogrPath: HABILLAGE/TRONCON_HYDROGRAPHIQUE.shp
  zone_occupation_sol:
    title: zone_occupation_sol
    ogrPath: HABILLAGE/ZONE_OCCUPATION_SOL.shp
    style: |
      function(feature) {
          switch (feature.properties.nature) {
              case 'Eau': return { color: 'blue', weight: 1};
              case 'Forêt': return { color: 'lightGreen', weight: 1};
              case 'Bâti': return { color: 'orange', weight: 1};
          }
      }
  zone_batie:
    title: zone_batie
    select: zone_occupation_sol / nature='Bâti'
    style: { color: orange, weight: 2, opacity: 0.65 }

# Nom de la base MySQL en fonction du serveur MySQL
mysql_database:
  '172.17.0.3': route500 # MySql docker
  mysql-bdavid.alwaysdata.net: bdavid_route500
