title: Présentation résumée de YamlDoc
description: |
  YamlDoc
  -------
  YamlDoc est un système de gestion documentaire fondé sur :
  
    - l'organisation de documents correspondants à des fichiers texte structurés au
      **[format Yaml](?ypath=/yaml)**,
    - l'utilisation, quand cela est adapté, pour les champs d'une **[sémantique bien connue](?ypath=/semantic)**
      (DublinCore, Skos, Schema.org, GeoJSON, ...), conformément aux principes
      du [Web des données](https://fr.wikipedia.org/wiki/Web_des_donn%C3%A9es),
    - le formattage de textes à l'intérieur du fichier Yaml utilisant le **[langage Markdown](?ypath=/markdown)**,
    - l'utilisation d'un [visualiseur](?ypath=/viewer) extensible de documents,
    - un mécanisme de [requête simple (ypath)](?ypath=/ypath) dans les documents,
    - la possibilité d'effectuer des [recherches plein texte](?ypath=/textSearch) dans les documents,
    - l'[organisation d'espaces documentaires partagés chacun sous la forme d'une archive Git](?ypath=/git),
      pouvant ainsi utiliser soit [Github](https://github.com/benoitdavidfr/yamldocs),
      soit une archive Git privée,
    - la définition en Php de [requêtes sur les documents](?ypath=/query),
    - l'accès aux documents au moyen d'[API](?ypath=/api),
    - la possibilité d'étendre le système en définissant des [classes de documents](?ypath=/ydclass).
      
  Une extension particulière permet l'[accès aux données géographiques](?doc=geodata).
    
yaml: |
  ### Fondé sur le format Yaml
  Le format [Yaml](https://fr.wikipedia.org/wiki/YAML) permet de structurer des documents ou des données
  par combinaison de listes, tableaux associatifs et données scalaires.
  Similaire au format JSON, il a l'avantage d'être très **lisible** pour nous les humains
  tout en étant facile à comprendre pour les machines.  
  Il permet de structurer aussi bien des documents composés principalement de textes comme le présent document,
  que des bases de données comme par exemple la [base historique des communes](?doc=geohisto/communes),
  des structures de graphe comme le [thésaurus EuroVoc](?doc=eurovoc)
  ou des documents strcturés complexes comme le
  [modèle de données Inspire](?doc=isnpire-datamodel) déduit du règlement interopérabilité.  
  Enfin, l'édition de documents Yaml est fournie par divers éditeurs de texte comme
  [Notepad++ sous Windows](https://notepad-plus-plus.org/fr/) ou [TextMate sur Mac](https://macromates.com/).
  
semantic: |
  ### Sémantique bien connue
  Lorsque cela est adapté, la sémantique des champs des tableaux associatifs Yaml respecte les standards suivants:
    
    - le [standard Dublin Core](https://fr.wikipedia.org/wiki/Dublin_Core) pour décrire les métadonnées
      d'un document ; ainsi il est recommandé d'utiliser des champs Dublin Core (comme title, subject, description,
      date, ...) pour définir les métadonnées de chaque document
      ([synthèse des principaux champs ici](?doc=dublincore)) ;
    - le [standard SKOS](https://fr.wikipedia.org/wiki/Simple_Knowledge_Organization_System) ([résumé ici](?doc=skos))
      encodé en Yaml pour représenter des thésaurus comme le [thésaurus EuroVoc](?doc=eurovoc)
      ou le [lexique topographique](?doc=topovoc) de l'AFT ;
    - le [standard Schema.org](https://fr.wikipedia.org/wiki/Schema.org) pour structurer
      des bases de données, telles que par exemple des listes d'organismes en utilisant le
      [type Organization](https://schema.org/Organization),
    - le [standard GeoJSON](https://tools.ietf.org/html/rfc7946) pour décrire des bases de données
      géographiques vecteur, [plus de détails ici](?doc=geodata).
      
markdown: |
  ### Markdown
  Le [langage Markdown](https://fr.wikipedia.org/wiki/Markdown) est utilisé pour formatter des textes (titres, gras,
  italique, liste de puces, liens URL, ...) ;
  son utilisation est [illustrée ici](?doc=markdown).
  Les différentes parties du présent document constituent un autre exemple d'utilisation du Markdown.
  
viewer: |
  ### Visualiseur
  Un visualiseur en mode web permet de visualiser les documents et de naviguer entre eux.
  Il offre aussi une fonctionnalité limitée de modification.  
  Un mode de visualisation par défaut est défini mais le visualisateur peut être étendu pour s'adapter aux
  différentes structures de document. Par exemples:
    
    - l'extension YamlData permet de visualiser le contenu d'une base de données,
    - l'extension YamlSkos permet de naviguer facilement au sein d'un thésaurus Skos,
    - l'extension DataModel permet de naviguer facilement au sein d'un modèle de données.
    
  Le visualisateur de l'espace public est accessible sous
  [http://georef.eu/yamldoc/?doc=index](http://georef.eu/yamldoc/?doc=index).  
  Son code source est disponible sur: [Github](https://github.com/benoitdavidfr/yamldoc).
  
ypath: |
  ### Ypath: mécanisme de requêtes simples
  La fourniture d'une chaine de caractères particulière (appelée Ypath), permet de sélectionner
  une partie d'un document ou d'une base de données.
  Son utilisation est illustrée par les exemples ci-dessous :
    
    - dans le présent document, la sélection de la partie *yaml* du document s'effectue en entrant
      dans le champ de saisie en dessous du menu la chaine `/yaml`,
    - il est aussi possible d'afficher ce même champ en suivant
      l'url [`?doc=yamldoc&ypath=/yaml`](?doc=yamldoc&ypath=/yaml),
    - dans un thésaurus comme le [lexique topographique](?doc=topovoc),
      on peut référencer le micro-thésaurus `lexiquecadastre`
      par la chaine [`/schemes/lexiquecadastre`](?doc=topovoc&ypath=/schemes/lexiquecadastre)
      ou le terme `matrice_cadastrale`
      par la chaine [`/concepts/matrice_cadastrale`](?doc=topovoc&ypath=/concepts/matrice_cadastrale),
    - dans la table des départements :
      - la sélection de l'enregistrement ayant pour *name* `Guadeloupe` s'effectue
        par la chaine [`/data/name=Guadeloupe`](?doc=geohisto/departements&ypath=/data/name=Guadeloupe)
      - la sélection des enregistrements ayant pour *insee_code* `04` s'effectue
        par la chaine [`/data/insee_code=04`](?doc=geohisto/departements&ypath=/data/insee_code=04)
      - la projection sur les champs *insee_code*, *name* et *successors* s'effectue par la 
        chaine [`/data/insee_code,name,successors`](?doc=geohisto/departements&ypath=/data/insee_code,name,successors)

textSearch: |
  ### Recherche plein texte
  En tapant un mot ou plusieurs dans le champ de saisie, une recherche plein texte est effectuée dans les documents.
  Si la chaine ne commence pas par un '/' la chaine est interprétée comme une liste de mots.  
  Par exemple, en tapant le mot `bourgogne` on trouve les fragments d'EuroVoc et de geohisto qui
  contiennent ce mot.  
  On notera que l'indexation est effectuée par fragment, c'est à dire chaine ou texte à l'intérieur du document,
  et non document par document.
  C'est un point important par exemple pour indexer des bases de données.  
  Ainsi, par exemple, lors de la recherche du mot `bourgogne`, un des résultats est le fragment d'Eurovoc
  correspondant au ypath `/concepts/5032/historyNote/fr/0` ; il s'agit donc de la première note historique
  en français associée au concept 5032. Il est simple de remonter ici au concept en modifiant le ypath.
  
  Différentes possibilités de recherche sont proposées :
    
    - en indiquant plusieurs mots on cherche les fragments contenant au moins un des mots,
      par exemple la chaine `Franche Comté` permet de trouver les fragments contenant soit Franche soit Comté,
    - en faisant précéder les mots par un + on cherche les fragments contenant tous les mots,
      par exemple la chaine `+Franche +Comté` permet de trouver les fragments contenant à la fois Franche et Comté,
    - en faisant précéder un mot par un - on exclue les fragments contenant ce mot,
      par exemple la chaine `+Franche -Comté` permet de trouver les fragments contenant Franche mais pas Comté,
    - en faisant suivre un mot par * on cherche les mots commencant par le mot,
      par exemple la chaine `geograph*` permet de trouver géographie et geography.
    
  Il est aussi possible de restreindre la recherche à un document, voire à certains fragments,
  par exemple on peut rechercher le mot géographie uniquement dans les concepts d'Eurovoc
  en indiquant dans le champ key `eurovoc/concepts`.
  
git: |
  ### Organisation d'espaces documentaires partagés chacun sous la forme d'une archive Git
  Les documents sont partitionnés en différents espaces documentaires
  avec pour chacun des accès en lecture et/ou en écriture pour certains utilisateurs.  
  Chaque espace documentaire correspond à une [archive Git](https://fr.wikipedia.org/wiki/Git)
  qui peut ainsi être partagée.
  Outre l'utilisation en mode web,
  les différents utilisateurs d'un espace peuvent ainsi modifier les documents sur leur poste local
  au moyen d'un éditeur de texte.
  Le logiciel Git est utilisé pour assurer la synchronisation entre les différentes copies. 
  
  Dans un premier temps, seuls 2 espaces sont définis: un espace public et un espace privé.  
  L'archive Git de l'espace public est accessible à l'URL:
  [https://github.com/benoitdavidfr/yamldocs](https://github.com/benoitdavidfr/yamldocs) et
  le visualisateur de cet espace est accessible sous
  [http://georef.eu/yamldoc/?doc=index](http://georef.eu/yamldoc/?doc=index).  
  
  L'utilisation du mécanisme des branches de git permet d'isoler les modifications de différents utilisateurs ;
  cette fonctionnalité potentielle n'a pas encore été mise en oeuvre.

query: |
  ### Requêtes en Php
  Les documents correspondant à des bases de données peuvent facilement être exploités par des scripts Php
  qui effectuent des requêtes dans les données.
  Ces requêtes sont appelées comme des documents.  
  Par exemples :
    
    - le document [jregdept](?doc=jregdept) réalise une jointure entre les régions actuelles et les départements
      actuels et renvoie la liste des régions actuelles avec pour chacune la liste de ses départements
      ([consulter le code source Php de la requête](?action=showPhpSrc&amp;doc=jregdept)),
    - il est possible de sélectionner une partie du document jregdept en indiquant un ypath,
      ainsi [ypath=`/data/insee_code=32/depts`](?doc=jregdept&ypath=/data/insee_code=32/depts)
      sélectionne la liste des départements de la région ayant 32 comme insee_code.
    - autre exemple, le document [cregions](?doc=cregions) sélectionne les régions actuelles
      ([consulter le code source Php de la requête](?action=showPhpSrc&amp;doc=cregions)).

api: |
  ### Accès aux documents au moyen d'API
  Les infos contenues dans un document sont exposées au travers de méthodes Php et d'une API REST.
  Une description OpenAPI de l'API REST serait nécessaire.

ydclass: |
  ### Définition de classes de documents
  Une classe de documents correspond à une classe d'objets Php implémentant des méthodes de consultation du document
  ainsi qu'une API de consultation en machine to machine. Les classes définies sont les suivantes:
    
    - [BasicYamlDoc](?action=version&doc=yamldoc&name=basicyamldoc.inc.php) - document simple,
      comme par exemple le présent document ;
    - [YamlCatalog](?action=version&doc=yamldoc&name=catalog.inc.php) - catalogue de documents,
      comme par exemple le [document d'accueil](?doc=index) de cet espace ;
    - [YamlData](?action=version&doc=yamldoc&name=yamldata.inc.php) - gestion des données,
      comme par exemples la [liste des régions historisées](?doc=geohisto/regions)
      ou la [synthèse des principaux champs Dublin Core](?doc=dublincore) ;
    - [MultiData](?action=version&doc=yamldoc&name=multidata.inc.php) pour décomposer une grande table
      en sous-tables stockées chacune dans un sous-document ;
    - [YamlSkos](?action=version&doc=yamldoc&name=yamlskos.inc.php) - gestion d'un thésaurus Skos
      organisé en micro-thésaurus,
      comme par exemples le [thésaurus EuroVoc](?doc=eurovoc) ou le [lexique topographique](?doc=topovoc) de l'AFT ;
    - [DataModel](?action=version&doc=yamldoc&name=datamodel.inc.php) - gestion d'un modèle de données
      UML comme extension d'un YamlSkos,
      comme par exemple le [modèle de données Inspire déduit du règlement interopérabilité](?doc=inspire-datamodel) ;
    - [LegalDoc]((?action=version&doc=yamldoc&name=legaldoc.inc.php)) - gestion d'un texte juridique,
      comme par exemple la [directive Inspire](?doc=inspire-directive) ;
    - [OdtDoc](?action=version&doc=yamldoc&name=odtdoc.inc.php) - affichage de fichiers ODT
    - [PdfDoc](?action=version&doc=yamldoc&name=pdfdoc.inc.php) - affichage de fichiers PDF
    - [YData](?action=version&doc=yamldoc&name=ydata.inc.php) pour la gestion des données (EN CONSTRUCTION) ;
    - [Map](?action=version&doc=yamldoc&name=map.inc.php) - description et affichage d'une carte Leaflet
    - [MarkerLib](?action=version&doc=yamldoc&name=markerlib.inc.php) - gestion d'une bibliothèque de symboles
      ponctuels utilisés dans les cartes,
      illustrée par cette [bibliothèque](?doc=markerlib) ;
    - [WfsServer](?action=version&doc=yamldoc&name=wfsserver.inc.php) - gestion de requêtes à un serveur WFS,
      illustré par le [serveur WFS du Géoportail IGN](?doc=geodata/igngpwfs) ;
    - [FeatureDataset](?action=version&doc=yamldoc&name=featureds.inc.php) - document définissant une série de données
      géographiques d'objets vecteur,
      illustré par [Route500](?doc=geodata/route500) ou la [BDTopo](?doc=geodata/bdtopo) de l'IGN.
